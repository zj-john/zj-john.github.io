---
title: 高性能网站建设指南-笔记（十一）
categories:
  - notes
tags:
  - 高性能网站建设指南
  - High Performance Web Sites
toc: true
date: 2017-12-20 12:10:43
---

![](/images/high-performance-web-sites.jpg)

<!-- more -->

# 总览

本书介绍了提高网站性能的14条规则：
1. 减少HTTP请求
2. 使用内容发布网络
3. 添加Expires头
4. 压缩组件
5. 将样式表放在顶部
6. 将脚本放在底部展示
7. 避免CSS表达式
8. 使用外部JavaScript和CSS
9. 减少DNS查找
10. 精简JavaScript
11. 避免重定向
12. 移除重复脚本
13. 配置ETag
14. 使Ajax可缓存

本书配套实例：[点此访问](http://stevesouders.com/hpws/)

# 规则12-移除重复脚本

>减少HTTP请求

[代码示例](http://stevesouders.com/hpws/rule-js-dupes.php)

## 重复脚本

### 来源
* 团队大小
* 脚本数量

### 危害
* 不必要的HTTP请求
* 执行JS所浪费的时间

### 避免重复脚本
载入脚本时判断
```js
function insertScript(jsFile) {
    if (alreadyInserted(jsFile)) {
        return;
    }
    pushInserted(jsFile);

    if (hasDependencies(jsFile)) {
        var dependencies = getDependencies(jsFile);
        dependencies.map((script) => {
            insertScript(script);
        })
    }
}
```


## 最佳实践
确保脚本只被包含一次
