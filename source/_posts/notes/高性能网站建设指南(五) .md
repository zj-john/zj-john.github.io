---
title: 高性能网站建设指南-笔记（五）
categories:
  - notes
tags:
  - 高性能网站建设指南
  - High Performance Web Sites
toc: true
date: 2017-11-23 12:07:39
---

![](/images/high-performance-web-sites.jpg)

<!-- more -->

# 总览

本书介绍了提高网站性能的14条规则：
1. 减少HTTP请求
2. 使用内容发布网络
3. 添加Expires头
4. 压缩组件
5. 将样式表放在顶部
6. 将脚本放在底部展示
7. 避免CSS表达式
8. 使用外部JavaScript和CSS
9. 减少DNS查找
10. 精简JavaScript
11. 避免重定向
12. 移除重复脚本
13. 配置ETag
14. 使Ajax可缓存

本书配套实例：[点此访问](http://stevesouders.com/hpws/)

# 规则5-将脚本放在底部展示

>提高用户体验

[代码示例](http://stevesouders.com/hpws/rule-js-bottom.php)


## 脚本带来的问题
脚本也会为上节讲到的可视化带来问题，因为使用脚本时，所有位于脚本以下的内容，逐步呈现都被阻塞了。所以将脚本放在越靠下的位置，意味着可以逐步呈现越多的内容。
* 脚本会阻塞对其后面内容的呈现
* 脚本会阻塞对其后面组件的下载

## 并行下载
> HTTP1.1规范：建议浏览器从每个主机名并行的下载两个组件。

根据HTTP1.1的规范，如果把资源从一个主机名下平均的移到两个主机名下，响应时间可以减少大约一半。

HTTP1.1的规范对浏览器只是一个建议，用户可以根据浏览器提供的配置操作来调整这一默认配置。但这种配置依赖于用户的浏览器，不能从服务器端主动触发。

> 使用多个主机名的话受限于带宽和CPU速度，过多的并行下载反而会降低性能。根据作者推荐，2个主机名比使用其它个数更能带来更好的性能。

在<b>下载脚本</b>(注：图片等其它资源是可以的)时并行下载实际上是被禁用的，即使使用了不同的主机名，浏览器也不会启动其它的下载。主要是为了保证脚本能够按照正确的顺序执行，因为脚本间可能存在着依赖关系。

## 最佳实践
将脚本移到页面底部,&lt;/body&gt;标签前。
