---
title: ç†è§£JavaScriptä¸­çš„æŸ¯é‡ŒåŒ–
categories:
  - notes
tags:
  - JavaScript Weekly
  - javascript
  - currying
  - æŸ¯é‡ŒåŒ–
  - functional programming
  - 2018.10.26
toc: true
date: 2018-10-30 10:52:02
---

![](https://cdn-images-1.medium.com/max/1000/1*RZ5E9_cqR-mG6yXmfEYDFQ.png)
å‡½æ•°å¼ç¼–ç¨‹æ˜¯ä¸€ç§ æŠŠå‡½æ•°ä½œä¸ºå‚æ•°ä¼ é€’ï¼ˆå›è°ƒï¼‰å’Œè¿”å›æ— å‰¯ä½œç”¨ï¼ˆä¿®æ”¹ç¨‹åºçš„çŠ¶æ€ï¼‰å‡½æ•°çš„ ç¼–ç¨‹æ–¹å¼ï¼Œ

è®¸å¤šè¯­è¨€éƒ½é‡‡ç”¨è¿™ç§ç¼–ç¨‹é£æ ¼ï¼Œå…¶ä¸­æœ€å—æ¬¢è¿çš„æ˜¯JavaScriptï¼ŒHaskellï¼ŒClojureï¼ŒErlangå’ŒScalaã€‚

è€Œä¸”æ ¹æ®å®ƒä¼ é€’å’Œè¿”å›å‡½æ•°çš„èƒ½åŠ›ï¼Œå¼•ç”³äº†è®¸å¤šæ¦‚å¿µï¼š

*   çº¯åŠŸèƒ½
*   æŸ¯é‡ŒåŒ–
*   é«˜é˜¶å‡½æ•°

æˆ‘ä»¬å°†åœ¨æœ¬æ–‡å­¦ä¹ çš„ä¸€ä¸ªæ¦‚å¿µæ˜¯ **æŸ¯é‡ŒåŒ–ï¼ˆCurryingï¼‰**ã€‚

åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å°†å­¦ä¹ æŸ¯é‡ŒåŒ–æ˜¯å¦‚ä½•å·¥ä½œçš„ä»¥åŠå®ƒå¦‚ä½•åœ¨å®é™…å¼€å‘ä¸­å‘æŒ¥ä½œç”¨ã€‚

<!-- more -->

## ä»€ä¹ˆæ˜¯æŸ¯é‡ŒåŒ–ï¼Ÿ
æŸ¯é‡ŒåŒ–æ˜¯å‡½æ•°å¼ç¼–ç¨‹ä¸­çš„ä¸€ä¸ªè¿‡ç¨‹ï¼Œæˆ‘ä»¬å¯ä»¥å°†å…·æœ‰å¤šä¸ªå‚æ•°çš„å‡½æ•°è½¬æ¢ä¸ºåµŒå¥—å‡½æ•°åºåˆ—ã€‚å®ƒè¿”å›ä¸€ä¸ªæ–°å‡½æ•°ï¼Œå¹¶åœ¨å†…éƒ¨ä½¿ç”¨ä¸‹ä¸€ä¸ªå‚æ•°ã€‚

å®ƒä¸æ–­è¿”å›ä¸€ä¸ªæ–°å‡½æ•°, ç„¶åæ¶ˆè€—å½“å‰å‚æ•°ï¼Œå°±åƒæˆ‘ä»¬ä¹‹å‰æ‰€è¯´çš„é‚£æ ·ï¼Œç›´åˆ°æ‰€æœ‰å‚æ•°éƒ½ç”¨å®Œä¸ºæ­¢ã€‚æ‰€æœ‰çš„å‚æ•°é€šè¿‡é—­åŒ…å¾—ä»¥ä¿ç•™ï¼ˆ`"alive"`ï¼‰ï¼Œå¹¶ä¸”å½“è¿”å›å¹¶æ‰§è¡ŒæŸ¯é‡ŒåŒ–é“¾ä¸­çš„æœ€ç»ˆå‡½æ•°æ—¶ï¼Œæ‰€æœ‰å‚æ•°éƒ½åœ¨æ‰§è¡Œä¸­ä½¿ç”¨ã€‚

> Curryingæ˜¯å°†å…·æœ‰å¤šä¸ª`arity`çš„å‡½æ•°è½¬æ¢ä¸ºå…·æœ‰è¾ƒå°‘`arity`å‡½æ•°çš„è¿‡ç¨‹ -â€Š [Kristina Brainwave](https://medium.com/@kbrainwave)

_æ³¨æ„ï¼š_ æœ¯è¯­`arity`æ˜¯æŒ‡å‡½æ•°çš„å‚æ•°ä¸ªæ•°ã€‚ä¾‹å¦‚ï¼Œ

```js
function fn(a, b) {  
    //...  
}

function _fn(a, b, c) {  
    //...  
}
```
å‡½æ•°`fn`æ¥å—ä¸¤ä¸ªå‚æ•°ï¼ˆ2-arityå‡½æ•°ï¼‰, `_fn`æ¥å—ä¸‰ä¸ªå‚æ•°ï¼ˆ3-arityå‡½æ•°ï¼‰ã€‚

å› æ­¤ï¼ŒæŸ¯é‡ŒåŒ–å°±æ˜¯å°†å…·æœ‰å¤šä¸ªå‚æ•°çš„å‡½æ•°è½¬æ¢ä¸ºä¸€ç³»åˆ—åªéœ€è¦**ä¸€ä¸ªå‚æ•°**å‡½æ•°çš„è¿‡ç¨‹ã€‚

æˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼š
```js
function multiply(a, b, c) {  
    return a * b * c;  
}
```
æ­¤å‡½æ•°æ¥å—ä¸‰ä¸ªæ•°å­—ï¼Œå°†æ•°å­—ç›¸ä¹˜å¹¶è¿”å›ç»“æœã€‚
```js
multiply(1,2,3); // 6
```
è¿™é‡Œå±•ç¤ºäº†å¦‚ä½•ä½¿ç”¨å®Œæ•´å‚æ•°è°ƒç”¨ä¹˜æ³•å‡½æ•°ã€‚  
ä¸‹é¢ï¼Œè®©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ª`æŸ¯é‡ŒåŒ–`çš„å‡½æ•°ç‰ˆæœ¬ï¼Œçœ‹çœ‹æˆ‘ä»¬å¦‚ä½•åœ¨ä¸€ç³»åˆ—å‡½æ•°è°ƒç”¨ä¸­å®ç°ç›¸åŒçš„åŠŸèƒ½ï¼Œå¹¶å¾—åˆ°ç›¸åŒçš„ç»“æœï¼š

```js
function multiply(a) {  
    return (b) => {  
        return (c) => {  
            return a * b * c  
        }  
    }  
}

log(multiply(1)(2)(3)) // 6
```
è¿™é‡Œï¼Œæˆ‘ä»¬å·²ç»å°†`multiply(1,2,3)`å‡½æ•°è°ƒç”¨è½¬ä¸ºäº†`multiply(1)(2)(3)`è¿™æ ·çš„å¤šä¸ªå‡½æ•°è°ƒç”¨ã€‚

ä¸ºäº†å¾—åˆ°ç›¸ä¹˜çš„ç»“æœï¼Œ1ï¼Œ2ï¼Œ3è¿™ä¸‰ä¸ªå‚æ•°ä¼šä¸€ä¸ªæ¥ä¸€ä¸ªåœ°ä¼ é€’ï¼Œæ¯ä¸ªæ•°å­—éƒ½é¢„å¡«å……åˆ°ä¸‹ä¸€ä¸ªå‡½æ•°å†…ï¼Œç­‰å¾…è°ƒç”¨ã€‚

æˆ‘ä»¬å¯ä»¥å°†`multiply(1)(2)(3)`åˆ†å¼€æ¥æ›´å¥½åœ°ç†è§£å®ƒï¼š
```
const mul1 = multiply(1);  
const mul2 = mul1(2);  
const result = mul2(3);  
log(result); // 6
```
è®©æˆ‘ä»¬ä¸€ä¸ªæ¥ä¸€ä¸ªçš„åˆ†æã€‚  
é¦–å…ˆï¼Œæˆ‘ä»¬ä¼ é€’å‚æ•°`1`ç»™`multiply`å‡½æ•°ï¼š
```js
let mul1 = multiply(1);
```
å®ƒè¿”å›å‡½æ•°ï¼š
```js
return (b) => {  
        return (c) => {  
            return a * b * c  
        }  
    }
```
ç°åœ¨ï¼Œ`mul1`è½¬ä¸ºä¸Šé¢çš„å‡½æ•°å®šä¹‰ï¼Œå®ƒéœ€è¦ä¸€ä¸ªå‚æ•°`b`ã€‚

æ¥ç€ï¼Œæˆ‘ä»¬è°ƒç”¨`mul1`å‡½æ•°ï¼Œä¼ å…¥å‚æ•°`2`ï¼š
```js
let mul2 = mul1(2);
```
åœ¨`mul1`å°†è¿”å›ç¬¬ä¸‰ä¸ªå‡½æ•°ï¼š
```js
return (c) => {  
            return a * b * c  
        }
```
è¿”å›çš„å‡½æ•°ç°åœ¨å­˜å‚¨åœ¨`mul2`å˜é‡ä¸­ã€‚
ä»æœ¬è´¨ä¸Šè®²ï¼Œ`mul2`æ˜¯ï¼š
```js
mul2 = (c) => {  
            return a * b * c  
        }
```
å½“`mul2`è°ƒç”¨å‚æ•°`3`ï¼Œ
```js
const result = mul2(3);
```
å®ƒä¸å…ˆå‰é€šè¿‡çš„å‚æ•°ï¼š`a = 1`, `b = 2`ä¸€èµ·è®¡ç®—å¹¶è¿”å›`6`ã€‚
```js
log(result); // 6
```
ä½œä¸ºåµŒå¥—å‡½æ•°ï¼Œ`mul2`å¯ä»¥è®¿é—®å¤–éƒ¨å‡½æ•°çš„å˜é‡èŒƒå›´ï¼Œ`multiply`ä»¥åŠ`mul1`ã€‚

è¿™æ˜¯`mul2`å¯ä»¥ä½¿ç”¨å‰ç½®å‡½æ•°ä¸­å®šä¹‰çš„å˜é‡æ‰§è¡Œä¹˜æ³•è¿ç®—çš„å‰æã€‚  
è™½ç„¶è¿™äº›å‡½æ•°æ—©å·²è¿”å›ï¼Œå¹¶ä¸”åœ¨å†…å­˜ä¸­`åƒåœ¾å›æ”¶`äº†ï¼Œä½†å®ƒçš„å˜é‡ä»ä»¥æŸç§æ–¹å¼ä¿æŒ"alive"ã€‚

æ‚¨ä¼šçœ‹åˆ°ä¸‰ä¸ªæ•°å­—ä¸€æ¬¡ä¸€ä¸ªåœ°åº”ç”¨äºè¯¥å‡½æ•°ï¼Œå¹¶ä¸”æ¯æ¬¡éƒ½è¿”å›ä¸€ä¸ªæ–°å‡½æ•°ï¼Œç›´åˆ°æ‰€æœ‰æ•°å­—éƒ½ç”¨å®Œä¸ºæ­¢ã€‚

è®©æˆ‘ä»¬çœ‹å¦ä¸€ä¸ªä¾‹å­ï¼š
```js
function volume(l,w,h) {  
    return l * w * h;  
}

const aCylinder = volume(100,20,90) // 180000l
```
æˆ‘ä»¬æœ‰ä¸€ä¸ª`volume`å‡½æ•°ï¼Œå®ƒå¯ä»¥è®¡ç®—ä»»ä½•ç«‹æ–¹ä½“çš„ä½“ç§¯ã€‚

curriedç‰ˆæœ¬å°†æ¥å—ä¸€ä¸ªå‚æ•°å¹¶è¿”å›ä¸€ä¸ªå‡½æ•°ï¼Œè¯¥å‡½æ•°ä¹Ÿå°†æ¥å—ä¸€ä¸ªå‚æ•°å¹¶è¿”å›ä¸€ä¸ªå‡½æ•°ã€‚ç„¶åå¾ªç¯å¾€å¤ï¼Œç›´åˆ°åˆ°è¾¾æœ€åä¸€ä¸ªå‚æ•°å¹¶è¿”å›æœ€åä¸€ä¸ªå‡½æ•°ï¼Œç„¶åæ‰§è¡Œæ‰€æœ‰å‰ç½®å‚æ•°å’Œæœ€åä¸€ä¸ªå‚æ•°çš„ä¹˜æ³•è¿ç®—ã€‚
```js
function volume(l) {  
    return (w) => {  
        return (h) => {  
            return l * w * h  
        }  
    }  
}  
const aCylinder = volume(100)(20)(90) // 180000
```
ä¸æˆ‘ä»¬åœ¨`multiply`å‡½æ•°ä¸­æ‰€ä½¿ç”¨çš„ä¸€æ ·ï¼Œæœ€åä¸€ä¸ªå‡½æ•°åªæ¥å—å‚æ•°`h`ï¼Œä½†æ˜¯å°†ä½¿ç”¨å·²åŒ…å«åœ¨å‡½æ•°ä½œç”¨åŸŸçš„å…¶ä»–å˜é‡æ¥æ‰§è¡Œæœ€ç»ˆæ“ä½œã€‚  
å› ä¸º**é—­åŒ…**ï¼Œæ‰€ä»¥è¿™ç§æ–¹å¼æ˜¯æœ‰æ•ˆçš„ã€‚

_curryingèƒŒåçš„æƒ³æ³•æ˜¯è·å–ä¸€ä¸ªå‡½æ•°å¹¶æ´¾ç”Ÿä¸€ä¸ªè¿”å›ç‰¹æ®Šå‡½æ•°çš„å‡½æ•°ã€‚_

## æ•°å­¦ä¸­çš„æŸ¯é‡ŒåŒ–
[ç»´åŸºç™¾ç§‘](https://en.m.wikipedia.org/wiki/Currying)è¿›ä¸€æ­¥ç»™å‡ºäº†æŸ¯é‡ŒåŒ–çš„æ¦‚å¿µã€‚è®©æˆ‘ä»¬ç”¨ä¸‹é¢çš„ä¾‹å­æ¥å­¦ä¹ ã€‚

å¦‚æœæˆ‘ä»¬æœ‰ä¸€ä¸ªç­‰å¼ï¼š
```
    f(x,y) = x^2 + y = z
```
æœ‰ä¸¤ä¸ªå˜é‡xå’Œyã€‚å¦‚æœä¸¤ä¸ªå˜é‡æ˜¯`x=3`å’Œ`y=4`ï¼Œå°±å¯ä»¥è®¡ç®—`z`çš„å€¼ã€‚

è®©æˆ‘ä»¬åœ¨`f(x,y)`æ›¿æ¢`x`å’Œ`y`çš„å€¼ï¼š
```
    f(x,y) = f(3,4) = x^2 + y = 3^2 + 4 = 13 = z
```
æˆ‘ä»¬å¾—åˆ°ç»“æœï¼Œ`13`ã€‚

æˆ‘ä»¬å¯ä»¥æŸ¯é‡ŒåŒ–`f(x,y)`ï¼š
```
    h = x^2 + y = f(x,y)
    hy(x) = x^2 + y = hx(y) = x^2 + y
```
**æ³¨æ„**ï¼š**hx** ä¸­ **x** æ˜¯ä¸‹æ ‡ï¼Œ**hy** ä¸­ **y** æ˜¯ä¸‹æ ‡ã€‚

å¦‚æœæˆ‘ä»¬åœ¨ç­‰å¼`hx(y) = x^2 + y`ä¸­å›ºå®š`x=3`ï¼Œå®ƒå°†è¿”å›ä¸€ä¸ªä»¥`y`ä½œä¸ºå˜é‡çš„æ–°çš„ç­‰å¼ï¼š
```
    h3(y) = 3^2 + y = 9 + y
```
**æ³¨æ„** ï¼š**h3** ä¸­ **3** æ˜¯ä¸‹æ ‡

ä¸Šå¼ç­‰åŒäºï¼š
```
    h3(y) = h(3)(y) = f(3,y) = 3^2 + y = 9 + y
```

æœ€ç»ˆè¿”å›äº†ä¸€ä¸ªéœ€è¦å˜é‡`y`çš„æ–°æ–¹ç¨‹å¼`9 + y`ã€‚
æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬ä¼ å…¥`y=4`ï¼š
```
    h3(4) = h(3)(4) = f(3,4) = 9 + 4 = 13
```
`y`æ˜¯æŸ¯é‡ŒåŒ–å˜é‡é“¾ä¸­çš„æœ€åä¸€ä¸ªå˜é‡ï¼Œåœ¨å‰ä¸€ä¸ªå˜é‡`x = 3`ä»ä¿ç•™çš„å‰æä¸‹ï¼Œæ‰§è¡Œäº†ç›¸åŠ æ“ä½œï¼Œæœ€ç»ˆç®—ç»“æœä¸º`13`ã€‚

äº‹å®ä¸Šï¼Œæˆ‘ä»¬å°†ç­‰å¼`f(x,y) = 3^2 + y`æŸ¯é‡ŒåŒ–ä¸ºäº†ä¸€ç³»åˆ—ç­‰å¼ï¼š
```
    3^2 + y -> 9 + y

    f(3,y) = h3(y) = 3^2 + y = 9 + y
    f(3,y) = 9 + y
    f(3,4) = h3(4) = 9 + 4 = 13
```

å“‡ï¼è¿™æ˜¯æ•°å­¦ä¸­çš„æŸ¯é‡ŒåŒ–ï¼Œå¦‚æœä½ å‘ç°è®²è§£çš„ä¸å¤Ÿæ¸…æ¥šğŸ˜•ï¼Œå¯ä»¥é˜…è¯»ğŸ‘‰ [ç»´åŸºç™¾ç§‘](https://en.m.wikipedia.org/wiki/Currying)ï¼Œäº†è§£å…¨éƒ¨ç»†èŠ‚ã€‚

## æŸ¯é‡ŒåŒ–å’Œéƒ¨åˆ†å‡½æ•°åº”ç”¨ï¼ˆPartial function applicationï¼‰

ç°åœ¨ï¼Œæœ‰äº›äººå¯èƒ½ä¼šå¼€å§‹è®¤ä¸ºæŸ¯é‡ŒåŒ–å‡½æ•°çš„åµŒå¥—å‡½æ•°æ•°é‡å–å†³äºå®ƒæ¥æ”¶çš„å‚æ•°çš„æ•°é‡ã€‚æ˜¯çš„ï¼Œè¿™å°±æ˜¯ **æŸ¯é‡ŒåŒ–**ã€‚

æˆ‘å¯ä»¥æŠŠ _volume_ çš„æŸ¯é‡ŒåŒ–å‡½æ•°è®¾è®¡ä¸ºè¿™æ ·ï¼š
```js
function volume(l) {  
    return (w, h) => {  
        return l * w * h  
    }  
}
```
æ‰€ä»¥å®ƒå¯ä»¥åƒè¿™æ ·è¢«è°ƒç”¨ï¼š

```
const hCy = volume(70);

hCy(203,142);  
hCy(220,122);  
hCy(120,123);
```

æˆ–è€…

```
volume(70)(90,30);  
volume(70)(390,320);  
volume(70)(940,340);
```
æˆ‘ä»¬åˆšåˆšå®šä¹‰äº†ä¸€ä¸ªä¸“é—¨çš„å‡½æ•°æ¥è®¡ç®—ä»»ä½•é•¿åº¦ä¸ºï¼ˆ`l`ï¼‰çš„åœ†æŸ±ä½“çš„ä½“ç§¯ã€‚

å®ƒéœ€è¦`3`ä¸ªå‚æ•°å¹¶å…·æœ‰`2`å±‚åµŒå¥—å‡½æ•°ï¼Œä¸åƒæˆ‘ä»¬ä»¥å‰çš„ç‰ˆæœ¬ï¼Œéœ€è¦`3`å‚æ•°æ—¶è¦åš`3`å±‚åµŒå¥—å‡½æ•°ã€‚

è¿™ä¸ªç‰ˆæœ¬ä¸æ˜¯æŸ¯é‡ŒåŒ–,åªæ˜¯ _volume_ å‡½æ•°çš„éƒ¨åˆ†åº”ç”¨ã€‚

æŸ¯é‡ŒåŒ–å’Œéƒ¨åˆ†åº”ç”¨æ˜¯ç›¸å…³çš„ï¼Œä½†å®ƒä»¬æœ‰ä¸åŒçš„æ¦‚å¿µã€‚

éƒ¨åˆ†åº”ç”¨ç¨‹åºå°†å‡½æ•°è½¬æ¢ä¸ºå…·æœ‰è¾ƒå°arityçš„å¦ä¸€ä¸ªå‡½æ•°ã€‚

```js
// from
function acidityRatio(x, y, z) {  
    return performOp(x,y,z)  
}
// to
function acidityRatio(x) {  
    return (y,z) => {  
        return performOp(x,y,z)  
    }  
}
```
**æ³¨æ„**ï¼šæˆ‘æ•…æ„çœç•¥äº†`performOp`å‡½æ•°çš„å®ç°ï¼Œå®ƒä¸æ˜¯é‡ç‚¹ã€‚  
ä½ å¿…é¡»è¦äº†è§£çš„æ˜¯æŸ¯é‡ŒåŒ–å’Œéƒ¨åˆ†åº”ç”¨çš„æ¦‚å¿µã€‚

è¿™æ˜¯acidityRatioå‡½æ•°çš„éƒ¨åˆ†åº”ç”¨ï¼Œä¸æ¶‰åŠåˆ°æŸ¯é‡ŒåŒ–çš„é—®é¢˜ã€‚  
acidityRatioå‡½æ•°è¢«éƒ¨åˆ†åº”ç”¨ä»¥æ¥å—è¾ƒå°‘çš„arityï¼Œæœ€ç»ˆæœŸæœ›å‚æ•°çš„æ•°é‡å°‘äºå…¶åŸå§‹å‡½æ•°ã€‚

å¦‚æœæŠŠå®ƒæŸ¯é‡ŒåŒ–ï¼Œå®ƒä¼šæ˜¯è¿™æ ·çš„ï¼š
```js
function acidityRatio(x) {  
    return (y) = > {  
        return (z) = > {  
            return performOp(x,y,z)  
        }  
    }  
}
```
æŸ¯é‡ŒåŒ–æ ¹æ®å‡½æ•°çš„å‚æ•°ä¸ªæ•°åˆ›å»ºåµŒå¥—å‡½æ•°ã€‚æ¯ä¸ªå‡½æ•°éƒ½æ¥æ”¶ä¸€ä¸ªå‚æ•°ã€‚å¦‚æœæ²¡æœ‰å‚æ•°ï¼Œä¹Ÿå°±æ²¡æœ‰æŸ¯é‡ŒåŒ–äº†ã€‚

> Curryingé€‚ç”¨äºå…·æœ‰ä¸¤ä¸ªä»¥ä¸Šå‚æ•°çš„å‡½æ•° -â€Š[_Wikipedia_](https://en.m.wikipedia.org/wiki/Currying)

å¯èƒ½å­˜åœ¨ä¸€ç§æƒ…å†µï¼Œè®©æŸ¯é‡ŒåŒ–å’Œéƒ¨åˆ†åº”ç”¨å½¼æ­¤ç›¸é‡ï¼Œå¦‚ä¸‹ã€‚  
å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªå‡½æ•°ï¼š
```js
function div(x,y) {  
    return x/y;  
}
```
å¦‚æœæˆ‘ä»¬éƒ¨åˆ†åº”ç”¨å®ƒã€‚æˆ‘ä»¬å°†å¾—åˆ°ï¼š
```js
function div(x) {  
    return (y) => {  
        return x/y;  
    }  
}
```
åŒæ—¶ï¼ŒæŸ¯é‡ŒåŒ–å°†ç»™æˆ‘ä»¬ç›¸åŒçš„ç»“æœï¼š
```js
function div(x) {  
    return (y) => {  
        return x/y;  
    }  
}
```
è™½ç„¶æŸ¯é‡ŒåŒ–å’Œéƒ¨åˆ†å‡½æ•°æœ‰å¯èƒ½ç»™å‡ºç›¸åŒçš„ç»“æœï¼Œä½†å®ƒä»¬ä»æ˜¯ä¸¤ä¸ªä¸åŒçš„æ¦‚å¿µã€‚

å°±åƒæˆ‘ä»¬ä¹‹å‰è¯´çš„é‚£æ ·ï¼ŒæŸ¯é‡ŒåŒ–å’Œéƒ¨åˆ†åº”ç”¨æ˜¯ç›¸å…³çš„ï¼Œä½†å®é™…ä¸Šå¹¶æ²¡æœ‰ç›¸åŒçš„è®¾è®¡ã€‚ä»–ä»¬ä¹‹é—´çš„å…±åŒç‚¹æ˜¯ä»–ä»¬éƒ½ä¾é é—­åŒ…æ¥å·¥ä½œã€‚

## æŸ¯é‡ŒåŒ–æœ‰ç”¨å—ï¼Ÿ

å½“ç„¶ï¼Œå½“æ‚¨é‡åˆ°ä»¥ä¸‹åœºæ™¯æ—¶ï¼ŒæŸ¯é‡ŒåŒ–ä¼šæ´¾ä¸Šç”¨åœºï¼š

1. **ç¼–å†™å¯ä»¥è½»æ¾é‡ç”¨å’Œé…ç½®çš„å°ä»£ç æ¨¡å—ï¼Œå°±åƒæˆ‘ä»¬ä½¿ç”¨npmä¸€æ ·ï¼š**
ä¾‹å¦‚ï¼Œæ‚¨æ‹¥æœ‰ä¸€å®¶å•†åº—ğŸ å¹¶å¸Œæœ›ä¸ºæ‚¨çš„å®¢æˆ·æä¾›10ï¼…ğŸ’µçš„æŠ˜æ‰£ï¼š
```js
function discount(price, discount) {  
    return price * discount  
}
```
å½“ä¸€ä¸ªå®¢æˆ·è´­ä¹°ä»·å€¼500ç¾å…ƒçš„å•†å“æ—¶ï¼Œä½ ä¼šç»™ä»–ï¼š
```js
const price = discount(500,0.10); // $50   
// $500â€Š - $50 = $450
```
ä»é•¿è¿œæ¥çœ‹ï¼Œæˆ‘ä»¬ä¼šå‘ç°è‡ªå·±æ¯å¤©éƒ½åœ¨è®¡ç®—10ï¼…çš„æŠ˜æ‰£ã€‚
```js
const price = discount(1500,0.10); // $150  
// $1,500 - $150 = $1,350

const price = discount(2000,0.10); // $200  
// $2,000 - $200 = $1,800

const price = discount(50,0.10); // $5  
// $50 - $5 = $45

const price = discount(5000,0.10); // $500  
// $5,000 - $500 = $4,500

const price = discount(300,0.10); // $30  
// $300 - $30 = $270
```
æˆ‘ä»¬å¯ä»¥æŠŠdiscountåŠŸèƒ½æŸ¯é‡ŒåŒ–ï¼Œè¿™æ ·æˆ‘ä»¬å°±ä¸ç”¨æ€»æ˜¯æ·»åŠ 0.10æŠ˜æ‰£ï¼š
```js
function discount(discount) {  
    return (price) => {  
        return price * discount;  
    }  
}

const tenPercentDiscount = discount(0.1);
```
ç°åœ¨ï¼Œæˆ‘ä»¬ç°åœ¨åªéœ€è¦æ‚¨å®¢æˆ·è´­ä¹°çš„å•†å“ä»·æ ¼å°±å¯ä»¥è®¡ç®—äº†ï¼š
```js
tenPercentDiscount(500); // $50  
// $500 - $50 = $450
```
åŒæ ·ï¼Œæœ‰äº›ä¼˜æƒ å®¢æˆ·æ¯”å…¶å®ƒä¼˜æƒ å®¢æˆ·æ›´é‡è¦ï¼Œè®©æˆ‘ä»¬ç§°ä¹‹ä¸ºè¶…çº§å®¢æˆ·ã€‚æˆ‘ä»¬å¸Œæœ›ä¸ºè¶…çº§å®¢æˆ·æä¾›20ï¼…çš„æŠ˜æ‰£ã€‚

æˆ‘ä»¬ä½¿ç”¨æŸ¯é‡ŒåŒ–ï¼š
```js
const twentyPercentDiscount = discount(0.2);
```
æˆ‘ä»¬é€šè¿‡ä½¿ç”¨0.2æŠ˜æ‰£å€¼åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„æŸ¯é‡ŒåŒ–å‡½æ•°ï¼Œ
è¿”å›çš„å‡½æ•°`twentyPercentDiscount`å°†ç”¨äºè®¡ç®—æˆ‘ä»¬è¶…çº§å®¢æˆ·çš„æŠ˜æ‰£ï¼š
```js
twentyPercentDiscount(500); // 100  
// $500 - $100 = $400  
twentyPercentDiscount(5000); // 1000  
// $5,000 - $1,000 = $4,000  
twentyPercentDiscount(1000000); // 200000  
// $1,000,000 - $200,000 = $600,000
```
2. **é¿å…é¢‘ç¹è°ƒç”¨å…·æœ‰ç›¸åŒå‚æ•°çš„å‡½æ•°**ï¼š
ä¾‹å¦‚ï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ªè®¡ç®—åœ†æŸ±ä½“ç§¯çš„å‡½æ•°ï¼š
```js
function volume(l, w, h) {  
    return l * w * h;  
}
```
ç¢°å·§ä»“åº“ä¸­çš„æ‰€æœ‰åœ†æŸ±é«˜åº¦éƒ½ä¸º100ç±³ã€‚ä½ ä¼šçœ‹åˆ°ï¼Œä½ ä¼šåå¤ä½¿ç”¨`h`ä¸º`100`è°ƒç”¨æ­¤å‡½æ•°ï¼š
```js
volume(200,30,100) // 2003000l  
volume(32,45,100); //144000l  
volume(2322,232,100) // 53870400l
```
è¦è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œä½ å¯ä»¥è°ƒæ•´`volume`å‡½æ•°ï¼ˆå°±åƒæˆ‘ä»¬ä¹‹å‰åšçš„é‚£æ ·ï¼‰ï¼š
```js
function volume(h) {  
    return (w) => {  
        return (l) => {  
            return l * w * h  
        }  
    }  
}
```
æˆ‘ä»¬å¯ä»¥ä¸ºç‰¹å®šçš„åœ†æŸ±é«˜åº¦å®šä¹‰ä¸€ä¸ªç‰¹å®šçš„å‡½æ•°ï¼š
```js
const hCylinderHeight = volume(100);

hCylinderHeight(200)(30); // 600,000l  
hCylinderHeight(2322)(232); // 53,870,400l
```

## é€šç”¨æŸ¯é‡ŒåŒ–å‡½æ•°
è®©æˆ‘ä»¬å¼€å‘ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒæ¥å—ä»»ä½•å‡½æ•°å¹¶è¿”å›å‡½æ•°çš„æŸ¯é‡ŒåŒ–ç‰ˆæœ¬ã€‚

> æ­¤å‡½æ•°ä¸æ˜¯å”¯ä¸€çš„ï¼Œä½ å¯ä»¥å†™è‡ªå·±çš„ç‰ˆæœ¬

```js
function curring(fn){
  var _args = [];
  return function cb(){
    if(arguments.length === 0) {
      return fn.apply(this, _args);
    }
    Array.prototype.push.apply(_args, [].slice.call(arguments));
    return cb;
  }
}
```

ç¤ºä¾‹å¦‚ä¸‹ï¼š
```js
function volume(l,h,w) {  
    return l * h * w  
}

console.log(curring(volume)(100)(200)(900)())
// 18000000

const hCy = curring(volume)(100);

hCy(200)(900)(); // 18000000l  
hCy(70)(60)(); // 420000l

```

## é€šç”¨éƒ¨åˆ†å‡½æ•°

```js
function PartialFunction(fn, ...args) {  
    return (..._arg) => {  
        return fn(...args, ..._arg);  
    }  
}
```
ç¤ºä¾‹å¦‚ä¸‹ï¼š

```js
function volume(l,h,w) {  
    return l * h * w  
}

const hCy = PartialFunction(volume,100);

hCy(200,900); // 18000000l  
hCy(70,60); // 420000l
```

## ç»“è®º
é—­åŒ…ä½¿å¾—å¯ä»¥åœ¨JavaScriptä¸­è¿›è¡ŒæŸ¯é‡ŒåŒ–ã€‚å®ƒèƒ½å¤Ÿä¿ç•™å·²ç»æ‰§è¡Œçš„å‡½æ•°çš„çŠ¶æ€ï¼Œä½¿æˆ‘ä»¬èƒ½å¤Ÿåˆ›å»ºä¸€ä¸ªå‡½æ•°ä¸ºç‰¹å®šå€¼çš„å·¥å‚å‡½æ•°ã€‚

æŸ¯é‡ŒåŒ–ï¼Œé—­åŒ…å’Œå‡½æ•°å¼ç¼–ç¨‹æ˜¯æ¯”è¾ƒæ£˜æ‰‹çš„ä¸€å—å„¿å†…å®¹ã€‚ä½†é€šè¿‡ä¸æ–­çš„ç»ƒä¹ ï¼Œä¸€æ—¦æŒæ¡å®ƒï¼Œä½ ä¼šçŸ¥é“ä»˜å‡ºæ˜¯å€¼å¾—çš„ã€‚

## èµ„æº
* åŸæ–‡ https://blog.bitsrc.io/understanding-currying-in-javascript-ceb2188c339
* Curryingâ€Šâ€”â€ŠWikipedia https://en.m.wikipedia.org/wiki/Currying
* Partial Application Functionâ€Šâ€”â€ŠWikipedia https://en.m.wikipedia.org/wiki/Partial_application
